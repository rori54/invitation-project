<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"><title>Dynamic Invitation Editor</title>
    <!-- ... (весь <head> остается таким же) ... -->
    <style> /* ... (все стили остаются такими же) ... */ </style>
</head>
<body>
    <!-- ... (вся HTML структура остается такой же) ... -->
    <script>
    const LOCK_STYLE_CHOICE = false;
    const iframe = document.getElementById("preview-frame");
    let pageBlocks = []; let pageSettings = {}; let currentTemplate = ''; let previewResizeObserver;
    
    // ИЗМЕНЕНИЕ 1: ВОЗВРАЩАЕМ 'height' в данные по умолчанию
    let mainPageData = { template: 'wedding-classic.html', settings: { maxWidth: '800px', style: 'classic', backgroundImage: '' }, blocks: [ { type: 'hero', id: `block-${Date.now()}-1`, content: { subtitle: 'WE ARE GETTING MARRIED', names: 'John & Jane', date: 'September 15, 2025', imageUrl: 'https://cdn.pixabay.com/photo/2018/03/01/01/07/blossom-3189810_1280.jpg', height: 'auto', backgroundPosition: 'center 30%' }}, /* ... (остальные блоки без изменений) ... */ ] };
    let rsvpFormData = { /* ... (без изменений) ... */ };
    
    // ИЗМЕНЕНИЕ 2: ВОЗВРАЩАЕМ 'height' в данные для новых блоков
    function getNewBlockData(type) { const newBlock = { type: type, id: `block-${Date.now()}`, content: {} }; switch(type) { case 'hero': newBlock.content = { subtitle: 'New Subtitle', names: 'New Names', date: 'New Date', imageUrl: '', height: 'auto', backgroundPosition: 'center center' }; break; /* ... (остальные case без изменений) ... */ } return newBlock; }
    
    // ИЗМЕНЕНИЕ 3: ВОЗВРАЩАЕМ поле "Block Height" в HTML редактора
    function createEditorFieldsForBlock(block) {
        let fieldsHTML = '';
        // ВОЗВРАЩАЕМ heightField
        const heightField = `<div class="control-group"><label>Block Height (optional)</label><input type="text" data-key="height" value="${block.content.height || 'auto'}" placeholder="e.g., auto, 500px, 60vh"></div>`;
        const bgPosField = `<div class="control-group"><label>Background Position</label><input type="text" data-key="backgroundPosition" value="${block.content.backgroundPosition || 'center center'}" placeholder="e.g., center center, center 30%"></div>`;
        switch(block.type) {
            case 'hero':
                fieldsHTML = `<div class="control-group"><label>Subtitle</label><input type="text" data-key="subtitle" value="${block.content.subtitle}"></div><div class="control-group"><label>Names</label><input type="text" data-key="names" value="${block.content.names}"></div><div class="control-group"><label>Date (text)</label><input type="text" data-key="date" value="${block.content.date}"></div><div class="control-group"><label>Background Image URL</label><input type="url" data-key="imageUrl" value="${block.content.imageUrl}"></div>${heightField}${bgPosField}`;
                break;
            case 'image':
                 fieldsHTML = `<div class="control-group"><label>Image URL</label><input type="url" data-key="imageUrl" value="${block.content.imageUrl}"></div><div class="control-group"><label>Caption</label><input type="text" data-key="caption" value="${block.content.caption}"></div>${heightField}`;
                 break;
            // ... (остальные case без изменений)
        }
        return fieldsHTML;
    }

    // ... (весь остальной JS код в этом файле остается без изменений) ...
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=__GOOGLE_MAPS_API_KEY__&libraries=places&callback=initApp"></script>
</body>
</html>